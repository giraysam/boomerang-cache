!function(root,factory){"undefined"!=typeof exports?"undefined"!=typeof module&&(exports=module.exports=factory(root,exports)):"function"==typeof define&&define.amd?define(["exports"],function(exports){root.BoomerangCache=factory(root,exports)}):root.BoomerangCache=factory(root,{})}(this,function(){"use strict";function CacheFactory(cacheType){var cacheEngine;return"local"==cacheType&&(cacheEngine=localStorageApi),cacheEngine}function Boomerang(store,options){if(this.options=options,this.factory=new CacheFactory(this.options.type),"undefined"==typeof this.factory)throw"Undefined factory";this.factory.check()&&(this._store=store)}var api,localStorageApi,utils;return utils={extend:function(){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(arguments[0][key]=arguments[i][key]);return arguments[0]}},localStorageApi=function(){return{check:function(){var key="__boomerangCache__",value="boomerang";try{return localStorage.setItem(key,value),localStorage.removeItem(key),!0}catch(exc){return console.log("error"),!1}},getItem:function(key){return localStorage.getItem(key)},setItem:function(key,value){localStorage.removeItem(key),localStorage.setItem(key,value)},getAll:function(){for(var keys=Object.keys(localStorage),values={},i=keys.length;i--;)values[keys[i]]=localStorage.getItem(keys[i]);return values},getObject:function(key){var obj=localStorage.getItem(key);return JSON.parse(obj)},setObject:function(key,value){localStorage.removeItem(key),localStorage.setItem(key,JSON.stringify(value))},removeItem:function(key){return localStorage.removeItem(key)},clear:function(){localStorage.clear()}}}(),api={create:function(store,options){var defaultOptions={type:"local"};return options=utils.extend(defaultOptions,options),new Boomerang(store,options)}},Boomerang.prototype.set=function(key,value){return"undefined"==typeof value?this.factory.removeItem(key):"object"==typeof value?(this.factory.setObject(key,value),value):(this.factory.setItem(key,value),value)},Boomerang.prototype.get=function(key,defaultValue){var value=this.factory.getItem(key);return"undefined"!=typeof value?value:defaultValue},Boomerang.prototype.getAll=function(){return this.factory.getAll()},Boomerang.prototype.getObject=function(key,defaultValue){var value=this.factory.getObject(key);return"undefined"!=typeof value?value:defaultValue},Boomerang.prototype.clear=function(){this.factory.clear()},Boomerang.prototype.remove=function(key){return this.factory.removeItem(key)},Boomerang.prototype.check=function(){return this.factory.check()},api});
//# sourceMappingURL=boomerang-cache.map